{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loop = exports.conditional = exports.parse = void 0;\nvar parse = function parse(stream, schema) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\n  if (Array.isArray(schema)) {\n    schema.forEach(function (partSchema) {\n      return parse(stream, partSchema, result, parent);\n    });\n  } else if (typeof schema === 'function') {\n    schema(stream, result, parent, parse);\n  } else {\n    var key = Object.keys(schema)[0];\n    if (Array.isArray(schema[key])) {\n      parent[key] = {};\n      parse(stream, schema[key], result, parent[key]);\n    } else {\n      parent[key] = schema[key](stream, result, parent, parse);\n    }\n  }\n  return result;\n};\nexports.parse = parse;\nvar conditional = function conditional(schema, conditionFunc) {\n  return function (stream, result, parent, parse) {\n    if (conditionFunc(stream, result, parent)) {\n      parse(stream, schema, result, parent);\n    }\n  };\n};\nexports.conditional = conditional;\nvar loop = function loop(schema, continueFunc) {\n  return function (stream, result, parent, parse) {\n    var arr = [];\n    var lastStreamPos = stream.pos;\n    while (continueFunc(stream, result, parent)) {\n      var newParent = {};\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\n      // it falls into infinite recursion, null check to avoid the same\n\n      if (stream.pos === lastStreamPos) {\n        break;\n      }\n      lastStreamPos = stream.pos;\n      arr.push(newParent);\n    }\n    return arr;\n  };\n};\nexports.loop = loop;","map":{"version":3,"names":["Object","defineProperty","exports","value","loop","conditional","parse","stream","schema","result","arguments","length","undefined","parent","Array","isArray","forEach","partSchema","key","keys","conditionFunc","continueFunc","arr","lastStreamPos","pos","newParent","push"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/node_modules/js-binary-schema-parser/lib/index.js"],"sourcesContent":["\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.loop = exports.conditional = exports.parse = void 0;\r\n\r\nvar parse = function parse(stream, schema) {\r\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\r\n\r\n  if (Array.isArray(schema)) {\r\n    schema.forEach(function (partSchema) {\r\n      return parse(stream, partSchema, result, parent);\r\n    });\r\n  } else if (typeof schema === 'function') {\r\n    schema(stream, result, parent, parse);\r\n  } else {\r\n    var key = Object.keys(schema)[0];\r\n\r\n    if (Array.isArray(schema[key])) {\r\n      parent[key] = {};\r\n      parse(stream, schema[key], result, parent[key]);\r\n    } else {\r\n      parent[key] = schema[key](stream, result, parent, parse);\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexports.parse = parse;\r\n\r\nvar conditional = function conditional(schema, conditionFunc) {\r\n  return function (stream, result, parent, parse) {\r\n    if (conditionFunc(stream, result, parent)) {\r\n      parse(stream, schema, result, parent);\r\n    }\r\n  };\r\n};\r\n\r\nexports.conditional = conditional;\r\n\r\nvar loop = function loop(schema, continueFunc) {\r\n  return function (stream, result, parent, parse) {\r\n    var arr = [];\r\n    var lastStreamPos = stream.pos;\r\n\r\n    while (continueFunc(stream, result, parent)) {\r\n      var newParent = {};\r\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\r\n      // it falls into infinite recursion, null check to avoid the same\r\n\r\n      if (stream.pos === lastStreamPos) {\r\n        break;\r\n      }\r\n\r\n      lastStreamPos = stream.pos;\r\n      arr.push(newParent);\r\n    }\r\n\r\n    return arr;\r\n  };\r\n};\r\n\r\nexports.loop = loop;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}