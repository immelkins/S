{"ast":null,"code":"// ToBits.js\n// Extract frames and bits from GIF\n\nimport { parseGIF, decompressFrames } from \"gifuct-js\";\nexport default async function ToBits(file) {\n  try {\n    const arrayBuffer = await file.arrayBuffer();\n    const gif = parseGIF(arrayBuffer);\n    const decompressedFrames = decompressFrames(gif, true);\n    const logicalWidth = gif.lsd.width;\n    const logicalHeight = gif.lsd.height;\n    const safeFrames = decompressedFrames.map(frame => ({\n      ...frame,\n      width: logicalWidth,\n      height: logicalHeight\n    }));\n    const allBits = safeFrames.map(frame => {\n      let bits = '';\n      for (let i = 0; i < frame.patch.length; i += 4) {\n        bits += `${frame.patch[i]}${frame.patch[i + 1]}${frame.patch[i + 2]}${frame.patch[i + 3]}`;\n        if ((i + 4) % (frame.width * 4) === 0) bits += '\\n';\n      }\n      return bits;\n    });\n    return {\n      frames: safeFrames,\n      allBits\n    };\n  } catch (err) {\n    console.error(err);\n    throw new Error('Failed to parse GIF file.');\n  }\n}\n_c = ToBits;\nvar _c;\n$RefreshReg$(_c, \"ToBits\");","map":{"version":3,"names":["parseGIF","decompressFrames","ToBits","file","arrayBuffer","gif","decompressedFrames","logicalWidth","lsd","width","logicalHeight","height","safeFrames","map","frame","allBits","bits","i","patch","length","frames","err","console","error","Error","_c","$RefreshReg$"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/src/components/ToBits.js"],"sourcesContent":["// ToBits.js\r\n// Extract frames and bits from GIF\r\n\r\nimport { parseGIF, decompressFrames } from \"gifuct-js\";\r\n\r\nexport default async function ToBits(file) {\r\n  try {\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const gif = parseGIF(arrayBuffer);\r\n    const decompressedFrames = decompressFrames(gif, true);\r\n\r\n    const logicalWidth = gif.lsd.width;\r\n    const logicalHeight = gif.lsd.height;\r\n\r\n    const safeFrames = decompressedFrames.map(frame => ({\r\n      ...frame,\r\n      width: logicalWidth,\r\n      height: logicalHeight,\r\n    }));\r\n\r\n    const allBits = safeFrames.map(frame => {\r\n      let bits = '';\r\n      for (let i = 0; i < frame.patch.length; i += 4) {\r\n        bits += `${frame.patch[i]}${frame.patch[i + 1]}${frame.patch[i + 2]}${frame.patch[i + 3]}`;\r\n        if ((i + 4) % (frame.width * 4) === 0) bits += '\\n';\r\n      }\r\n      return bits;\r\n    });\r\n\r\n    return { frames: safeFrames, allBits };\r\n  } catch (err) {\r\n    console.error(err);\r\n    throw new Error('Failed to parse GIF file.');\r\n  }\r\n}\r\n"],"mappings":"AAAA;AACA;;AAEA,SAASA,QAAQ,EAAEC,gBAAgB,QAAQ,WAAW;AAEtD,eAAe,eAAeC,MAAMA,CAACC,IAAI,EAAE;EACzC,IAAI;IACF,MAAMC,WAAW,GAAG,MAAMD,IAAI,CAACC,WAAW,CAAC,CAAC;IAC5C,MAAMC,GAAG,GAAGL,QAAQ,CAACI,WAAW,CAAC;IACjC,MAAME,kBAAkB,GAAGL,gBAAgB,CAACI,GAAG,EAAE,IAAI,CAAC;IAEtD,MAAME,YAAY,GAAGF,GAAG,CAACG,GAAG,CAACC,KAAK;IAClC,MAAMC,aAAa,GAAGL,GAAG,CAACG,GAAG,CAACG,MAAM;IAEpC,MAAMC,UAAU,GAAGN,kBAAkB,CAACO,GAAG,CAACC,KAAK,KAAK;MAClD,GAAGA,KAAK;MACRL,KAAK,EAAEF,YAAY;MACnBI,MAAM,EAAED;IACV,CAAC,CAAC,CAAC;IAEH,MAAMK,OAAO,GAAGH,UAAU,CAACC,GAAG,CAACC,KAAK,IAAI;MACtC,IAAIE,IAAI,GAAG,EAAE;MACb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACI,KAAK,CAACC,MAAM,EAAEF,CAAC,IAAI,CAAC,EAAE;QAC9CD,IAAI,IAAI,GAAGF,KAAK,CAACI,KAAK,CAACD,CAAC,CAAC,GAAGH,KAAK,CAACI,KAAK,CAACD,CAAC,GAAG,CAAC,CAAC,GAAGH,KAAK,CAACI,KAAK,CAACD,CAAC,GAAG,CAAC,CAAC,GAAGH,KAAK,CAACI,KAAK,CAACD,CAAC,GAAG,CAAC,CAAC,EAAE;QAC1F,IAAI,CAACA,CAAC,GAAG,CAAC,KAAKH,KAAK,CAACL,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,EAAEO,IAAI,IAAI,IAAI;MACrD;MACA,OAAOA,IAAI;IACb,CAAC,CAAC;IAEF,OAAO;MAAEI,MAAM,EAAER,UAAU;MAAEG;IAAQ,CAAC;EACxC,CAAC,CAAC,OAAOM,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IAClB,MAAM,IAAIG,KAAK,CAAC,2BAA2B,CAAC;EAC9C;AACF;AAACC,EAAA,GA7B6BvB,MAAM;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}