{"ast":null,"code":"// ToBinary.js\nimport { encryptData } from \"./ToBlackBox\";\nexport default async function ToBinary(file, password) {\n  if (!file) throw new Error(\"No file provided\");\n  if (!password || password.trim() === \"\") throw new Error(\"Password is required for encryption\");\n  const arrayBuffer = await file.arrayBuffer();\n  const bytes = new Uint8Array(arrayBuffer);\n\n  // Convert file content to binary\n  let binary = '';\n  for (let i = 0; i < bytes.length; i++) {\n    binary += bytes[i].toString(2).padStart(8, '0');\n  }\n  const {\n    encryptedData,\n    iv,\n    salt\n  } = await encryptData(binary, password);\n  const encryptedBinary = Array.from(encryptedData).map(byte => byte.toString(2).padStart(8, '0')).join('');\n\n  // Metadata object\n  const metadata = {\n    iv,\n    salt,\n    originalLength: binary.length,\n    fileName: file.name,\n    fileType: file.type\n  };\n\n  // Convert metadata to binary\n  const metadataStr = JSON.stringify(metadata);\n  let metadataBinary = '';\n  for (let i = 0; i < metadataStr.length; i++) {\n    metadataBinary += metadataStr.charCodeAt(i).toString(2).padStart(8, '0');\n  }\n\n  // Add 32-bit length header at the start\n  const metadataLength = metadataBinary.length; // in bits\n  const lengthBinary = metadataLength.toString(2).padStart(32, '0');\n  metadataBinary = lengthBinary + metadataBinary;\n  return {\n    bits: encryptedBinary,\n    metabits: metadataBinary\n  };\n}\n_c = ToBinary;\nvar _c;\n$RefreshReg$(_c, \"ToBinary\");","map":{"version":3,"names":["encryptData","ToBinary","file","password","Error","trim","arrayBuffer","bytes","Uint8Array","binary","i","length","toString","padStart","encryptedData","iv","salt","encryptedBinary","Array","from","map","byte","join","metadata","originalLength","fileName","name","fileType","type","metadataStr","JSON","stringify","metadataBinary","charCodeAt","metadataLength","lengthBinary","bits","metabits","_c","$RefreshReg$"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/src/components/ToBinary.js"],"sourcesContent":["// ToBinary.js\r\nimport { encryptData } from \"./ToBlackBox\";\r\n\r\nexport default async function ToBinary(file, password) {\r\n  if (!file) throw new Error(\"No file provided\");\r\n  if (!password || password.trim() === \"\") throw new Error(\"Password is required for encryption\");\r\n\r\n  const arrayBuffer = await file.arrayBuffer();\r\n  const bytes = new Uint8Array(arrayBuffer);\r\n\r\n  // Convert file content to binary\r\n  let binary = '';\r\n  for (let i = 0; i < bytes.length; i++) {\r\n    binary += bytes[i].toString(2).padStart(8, '0');\r\n  }\r\n\r\n  const { encryptedData, iv, salt } = await encryptData(binary, password);\r\n  const encryptedBinary = Array.from(encryptedData)\r\n    .map(byte => byte.toString(2).padStart(8, '0'))\r\n    .join('');\r\n\r\n  // Metadata object\r\n  const metadata = {\r\n    iv,\r\n    salt,\r\n    originalLength: binary.length,\r\n    fileName: file.name,\r\n    fileType: file.type,\r\n  };\r\n\r\n  // Convert metadata to binary\r\n  const metadataStr = JSON.stringify(metadata);\r\n  let metadataBinary = '';\r\n  for (let i = 0; i < metadataStr.length; i++) {\r\n    metadataBinary += metadataStr.charCodeAt(i).toString(2).padStart(8, '0');\r\n  }\r\n\r\n  // Add 32-bit length header at the start\r\n  const metadataLength = metadataBinary.length; // in bits\r\n  const lengthBinary = metadataLength.toString(2).padStart(32, '0');\r\n  metadataBinary = lengthBinary + metadataBinary;\r\n\r\n  return {\r\n    bits: encryptedBinary,\r\n    metabits: metadataBinary,\r\n  };\r\n}\r\n"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAQ,cAAc;AAE1C,eAAe,eAAeC,QAAQA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EACrD,IAAI,CAACD,IAAI,EAAE,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;EAC9C,IAAI,CAACD,QAAQ,IAAIA,QAAQ,CAACE,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,MAAM,IAAID,KAAK,CAAC,qCAAqC,CAAC;EAE/F,MAAME,WAAW,GAAG,MAAMJ,IAAI,CAACI,WAAW,CAAC,CAAC;EAC5C,MAAMC,KAAK,GAAG,IAAIC,UAAU,CAACF,WAAW,CAAC;;EAEzC;EACA,IAAIG,MAAM,GAAG,EAAE;EACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,KAAK,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;IACrCD,MAAM,IAAIF,KAAK,CAACG,CAAC,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACjD;EAEA,MAAM;IAAEC,aAAa;IAAEC,EAAE;IAAEC;EAAK,CAAC,GAAG,MAAMhB,WAAW,CAACS,MAAM,EAAEN,QAAQ,CAAC;EACvE,MAAMc,eAAe,GAAGC,KAAK,CAACC,IAAI,CAACL,aAAa,CAAC,CAC9CM,GAAG,CAACC,IAAI,IAAIA,IAAI,CAACT,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAC9CS,IAAI,CAAC,EAAE,CAAC;;EAEX;EACA,MAAMC,QAAQ,GAAG;IACfR,EAAE;IACFC,IAAI;IACJQ,cAAc,EAAEf,MAAM,CAACE,MAAM;IAC7Bc,QAAQ,EAAEvB,IAAI,CAACwB,IAAI;IACnBC,QAAQ,EAAEzB,IAAI,CAAC0B;EACjB,CAAC;;EAED;EACA,MAAMC,WAAW,GAAGC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAAC;EAC5C,IAAIS,cAAc,GAAG,EAAE;EACvB,KAAK,IAAItB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmB,WAAW,CAAClB,MAAM,EAAED,CAAC,EAAE,EAAE;IAC3CsB,cAAc,IAAIH,WAAW,CAACI,UAAU,CAACvB,CAAC,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EAC1E;;EAEA;EACA,MAAMqB,cAAc,GAAGF,cAAc,CAACrB,MAAM,CAAC,CAAC;EAC9C,MAAMwB,YAAY,GAAGD,cAAc,CAACtB,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,EAAE,GAAG,CAAC;EACjEmB,cAAc,GAAGG,YAAY,GAAGH,cAAc;EAE9C,OAAO;IACLI,IAAI,EAAEnB,eAAe;IACrBoB,QAAQ,EAAEL;EACZ,CAAC;AACH;AAACM,EAAA,GA3C6BrC,QAAQ;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}