{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mesco\\\\OneDrive\\\\Documents\\\\GitHub\\\\S\\\\src\\\\components\\\\DecryptSection.js\",\n  _s = $RefreshSig$();\n// DecryptSection.js\nimport { useEffect, useState } from \"react\";\nimport ToBits from \"./ToBits\";\nimport '../stylesheets/Frames.css';\n\n// Convert binary string to text\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst binaryToText = binaryStr => {\n  let text = '';\n  for (let i = 0; i < binaryStr.length; i += 8) {\n    const byte = binaryStr.slice(i, i + 8);\n    text += String.fromCharCode(parseInt(byte, 2));\n  }\n  return text;\n};\n\n// Temporal decode (for metadata)\nconst temporalDecode = (frames, bitCount) => {\n  let bits = '';\n  let frameIndex = 0;\n  for (let i = 0; i < bitCount; i++) {\n    const frame = frames[frameIndex % frames.length];\n    bits += (frame.patch[2] & 1).toString(); // first pixel's B channel\n    frameIndex++;\n  }\n  return bits;\n};\n\n// Spatial decode (for main message)\nconst spatialDecode = (frames, messageBitLength) => {\n  let bits = '';\n  let count = 0;\n  for (const frame of frames) {\n    const patch = frame.patch;\n    for (let i = 0; i < patch.length; i += 4) {\n      // blue channel\n      if (count >= messageBitLength) break;\n      bits += (patch[i + 2] & 1).toString();\n      count++;\n    }\n    if (count >= messageBitLength) break;\n  }\n  return bits;\n};\nexport default function DecryptSection() {\n  _s();\n  const [frames, setFrames] = useState([]);\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState('');\n  const [error, setError] = useState(null);\n  const [metadata, setMetadata] = useState(null);\n  const [message, setMessage] = useState('');\n  const handleGIFChange = event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (file.type !== 'image/gif') {\n      setError('Please upload a valid GIF file.');\n      return;\n    }\n    setError(null);\n    setFile(file);\n    setFileName(file.name);\n  };\n  useEffect(() => {\n    if (!file) return;\n    ToBits(file).then(({\n      frames: extractedFrames\n    }) => {\n      setFrames(extractedFrames);\n\n      // --- Temporal decode ---\n      const headerBits = temporalDecode(extractedFrames, 32); // first 32 bits = metadata length\n      const metadataLength = parseInt(headerBits, 2);\n      const metadataBits = temporalDecode(extractedFrames, 32 + metadataLength).slice(32); // next N bits\n      let metadataStr = '';\n      for (let i = 0; i < metadataBits.length; i += 8) {\n        const byte = metadataBits.slice(i, i + 8);\n        metadataStr += String.fromCharCode(parseInt(byte, 2));\n      }\n      let parsedMetadata = null;\n      try {\n        parsedMetadata = JSON.parse(metadataStr);\n      } catch (err) {\n        setError('Failed to parse metadata: ' + err.message);\n        return;\n      }\n      setMetadata(parsedMetadata);\n\n      // --- Spatial decode ---\n      const totalBits = parsedMetadata.originalLength;\n      const messageBits = spatialDecode(extractedFrames, totalBits);\n      const textMessage = binaryToText(messageBits);\n      setMessage(textMessage);\n    }).catch(err => setError(err.message));\n  }, [file]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/gif\",\n      onChange: handleGIFChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), fileName && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Uploaded GIF: \", fileName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 20\n    }, this), metadata && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metadata\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Metadata\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: JSON.stringify(metadata, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"decrypted-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Decrypted Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n_s(DecryptSection, \"ViIkXfBNEr/7+GwBLlLSnKSHtnc=\");\n_c = DecryptSection;\nvar _c;\n$RefreshReg$(_c, \"DecryptSection\");","map":{"version":3,"names":["useEffect","useState","ToBits","jsxDEV","_jsxDEV","binaryToText","binaryStr","text","i","length","byte","slice","String","fromCharCode","parseInt","temporalDecode","frames","bitCount","bits","frameIndex","frame","patch","toString","spatialDecode","messageBitLength","count","DecryptSection","_s","setFrames","file","setFile","fileName","setFileName","error","setError","metadata","setMetadata","message","setMessage","handleGIFChange","event","target","files","type","name","then","extractedFrames","headerBits","metadataLength","metadataBits","metadataStr","parsedMetadata","JSON","parse","err","totalBits","originalLength","messageBits","textMessage","catch","children","accept","onChange","_jsxFileName","lineNumber","columnNumber","className","stringify","_c","$RefreshReg$"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/src/components/DecryptSection.js"],"sourcesContent":["// DecryptSection.js\r\nimport { useEffect, useState } from \"react\";\r\nimport ToBits from \"./ToBits\";\r\nimport '../stylesheets/Frames.css';\r\n\r\n// Convert binary string to text\r\nconst binaryToText = (binaryStr) => {\r\n  let text = '';\r\n  for (let i = 0; i < binaryStr.length; i += 8) {\r\n    const byte = binaryStr.slice(i, i + 8);\r\n    text += String.fromCharCode(parseInt(byte, 2));\r\n  }\r\n  return text;\r\n};\r\n\r\n// Temporal decode (for metadata)\r\nconst temporalDecode = (frames, bitCount) => {\r\n  let bits = '';\r\n  let frameIndex = 0;\r\n\r\n  for (let i = 0; i < bitCount; i++) {\r\n    const frame = frames[frameIndex % frames.length];\r\n    bits += (frame.patch[2] & 1).toString(); // first pixel's B channel\r\n    frameIndex++;\r\n  }\r\n\r\n  return bits;\r\n};\r\n\r\n// Spatial decode (for main message)\r\nconst spatialDecode = (frames, messageBitLength) => {\r\n  let bits = '';\r\n  let count = 0;\r\n\r\n  for (const frame of frames) {\r\n    const patch = frame.patch;\r\n\r\n    for (let i = 0; i < patch.length; i += 4) { // blue channel\r\n      if (count >= messageBitLength) break;\r\n      bits += (patch[i + 2] & 1).toString();\r\n      count++;\r\n    }\r\n    if (count >= messageBitLength) break;\r\n  }\r\n\r\n  return bits;\r\n};\r\n\r\nexport default function DecryptSection() {\r\n  const [frames, setFrames] = useState([]);\r\n  const [file, setFile] = useState(null);\r\n  const [fileName, setFileName] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [metadata, setMetadata] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleGIFChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    if (file.type !== 'image/gif') {\r\n      setError('Please upload a valid GIF file.');\r\n      return;\r\n    }\r\n    setError(null);\r\n    setFile(file);\r\n    setFileName(file.name);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!file) return;\r\n\r\n    ToBits(file)\r\n      .then(({ frames: extractedFrames }) => {\r\n        setFrames(extractedFrames);\r\n\r\n        // --- Temporal decode ---\r\n        const headerBits = temporalDecode(extractedFrames, 32); // first 32 bits = metadata length\r\n        const metadataLength = parseInt(headerBits, 2);\r\n\r\n        const metadataBits = temporalDecode(extractedFrames, 32 + metadataLength).slice(32); // next N bits\r\n        let metadataStr = '';\r\n        for (let i = 0; i < metadataBits.length; i += 8) {\r\n          const byte = metadataBits.slice(i, i + 8);\r\n          metadataStr += String.fromCharCode(parseInt(byte, 2));\r\n        }\r\n\r\n        let parsedMetadata = null;\r\n        try {\r\n          parsedMetadata = JSON.parse(metadataStr);\r\n        } catch (err) {\r\n          setError('Failed to parse metadata: ' + err.message);\r\n          return;\r\n        }\r\n        setMetadata(parsedMetadata);\r\n\r\n        // --- Spatial decode ---\r\n        const totalBits = parsedMetadata.originalLength;\r\n        const messageBits = spatialDecode(extractedFrames, totalBits);\r\n        const textMessage = binaryToText(messageBits);\r\n        setMessage(textMessage);\r\n\r\n      })\r\n      .catch(err => setError(err.message));\r\n  }, [file]);\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" accept=\"image/gif\" onChange={handleGIFChange} />\r\n      {fileName && <p>Uploaded GIF: {fileName}</p>}\r\n\r\n      {metadata && (\r\n        <div className=\"metadata\">\r\n          <h2>Metadata</h2>\r\n          <pre>{JSON.stringify(metadata, null, 2)}</pre>\r\n        </div>\r\n      )}\r\n\r\n      {message && (\r\n        <div className=\"decrypted-message\">\r\n          <h2>Decrypted Message</h2>\r\n          <pre>{message}</pre>\r\n        </div>\r\n      )}\r\n\r\n      {error && <p className=\"error\">{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}