{"ast":null,"code":"// ToBinary.js \n\nfunction uint8ArrayToBitArray(bytes) {\n  const bits = [];\n  for (const byte of bytes) {\n    for (let i = 7; i >= 0; i--) {\n      bits.push(byte >> i & 1);\n    }\n  }\n  return bits;\n}\nfunction stringToBitArray(str) {\n  const bits = [];\n  for (let i = 0; i < str.length; i++) {\n    const byte = str.charCodeAt(i);\n    for (let j = 7; j >= 0; j--) {\n      bits.push(byte >> j & 1);\n    }\n  }\n  return bits;\n}\nfunction numberTo32BitArray(num) {\n  const bits = [];\n  for (let i = 31; i >= 0; i--) {\n    bits.push(num >> i & 1);\n  }\n  return bits;\n}\n// Helper: Convert Uint8Array to Base64 string \nfunction uint8ArrayToBase64(uint8Array) {\n  return btoa(String.fromCharCode(...uint8Array));\n}\nexport default async function ToBinary(file) {\n  if (!file) throw new Error(\"No file provided\");\n  const arrayBuffer = await file.arrayBuffer();\n  const bytes = new Uint8Array(arrayBuffer);\n\n  // Encrypt raw bytes \n  let messageBits = uint8ArrayToBitArray(bytes);\n\n  // Encrypted payload to bit array \n  const lengthMessageBits = numberTo32BitArray(messageBits.length);\n  const payloadBits = [...lengthMessageBits, ...messageBits];\n\n  // Metadata object with Base64 encoding for binary data \n  const metadata = {\n    originalLength: bytes.length,\n    fileName: file.name,\n    fileType: file.type\n  };\n\n  // Metadata to JSON string and then to bit array \n  const metadataStr = JSON.stringify(metadata);\n  const metadataBits = stringToBitArray(metadataStr);\n\n  // Add 32-bit length header at the start \n  const lengthMetaBits = numberTo32BitArray(metadataBits.length);\n  const fullMetadataBits = [...lengthMetaBits, ...metadataBits];\n  return {\n    bits: payloadBits,\n    metabits: fullMetadataBits\n  };\n}\n_c = ToBinary;\nvar _c;\n$RefreshReg$(_c, \"ToBinary\");","map":{"version":3,"names":["uint8ArrayToBitArray","bytes","bits","byte","i","push","stringToBitArray","str","length","charCodeAt","j","numberTo32BitArray","num","uint8ArrayToBase64","uint8Array","btoa","String","fromCharCode","ToBinary","file","Error","arrayBuffer","Uint8Array","messageBits","lengthMessageBits","payloadBits","metadata","originalLength","fileName","name","fileType","type","metadataStr","JSON","stringify","metadataBits","lengthMetaBits","fullMetadataBits","metabits","_c","$RefreshReg$"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/src/components/ToBinary.js"],"sourcesContent":["// ToBinary.js \r\n\r\nfunction uint8ArrayToBitArray(bytes) {\r\n  const bits = [];\r\n  for (const byte of bytes) {\r\n    for (let i = 7; i >= 0; i--) {\r\n      bits.push((byte >> i) & 1);\r\n    }\r\n  }\r\n  return bits;\r\n}\r\n\r\nfunction stringToBitArray(str) {\r\n  const bits = [];\r\n  for (let i = 0; i < str.length; i++) {\r\n    const byte = str.charCodeAt(i);\r\n    for (let j = 7; j >= 0; j--) { bits.push((byte >> j) & 1); }\r\n  } return bits;\r\n} function numberTo32BitArray(num) {\r\n  const bits = [];\r\n  for (let i = 31; i >= 0; i--) {\r\n    bits.push((num >> i) & 1);\r\n  }\r\n  return bits;\r\n}\r\n// Helper: Convert Uint8Array to Base64 string \r\nfunction uint8ArrayToBase64(uint8Array) {\r\n  return btoa(String.fromCharCode(...uint8Array));\r\n}\r\n\r\nexport default async function ToBinary(file) {\r\n  if (!file) throw new Error(\"No file provided\");\r\n  const arrayBuffer = await file.arrayBuffer(); const bytes = new Uint8Array(arrayBuffer);\r\n\r\n  // Encrypt raw bytes \r\n  let messageBits = uint8ArrayToBitArray(bytes)\r\n\r\n  // Encrypted payload to bit array \r\n  const lengthMessageBits = numberTo32BitArray(messageBits.length);\r\n  const payloadBits = [...lengthMessageBits, ...messageBits];\r\n\r\n  // Metadata object with Base64 encoding for binary data \r\n  const metadata = { \r\n    originalLength: bytes.length, \r\n    fileName: file.name, \r\n    fileType: file.type, };\r\n\r\n  // Metadata to JSON string and then to bit array \r\n  const metadataStr = JSON.stringify(metadata); const metadataBits = stringToBitArray(metadataStr);\r\n\r\n  // Add 32-bit length header at the start \r\n  const lengthMetaBits = numberTo32BitArray(metadataBits.length);\r\n  const fullMetadataBits = [...lengthMetaBits, ...metadataBits];\r\n\r\n  return { bits: payloadBits, metabits: fullMetadataBits, };\r\n}\r\n"],"mappings":"AAAA;;AAEA,SAASA,oBAAoBA,CAACC,KAAK,EAAE;EACnC,MAAMC,IAAI,GAAG,EAAE;EACf,KAAK,MAAMC,IAAI,IAAIF,KAAK,EAAE;IACxB,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC3BF,IAAI,CAACG,IAAI,CAAEF,IAAI,IAAIC,CAAC,GAAI,CAAC,CAAC;IAC5B;EACF;EACA,OAAOF,IAAI;AACb;AAEA,SAASI,gBAAgBA,CAACC,GAAG,EAAE;EAC7B,MAAML,IAAI,GAAG,EAAE;EACf,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGG,GAAG,CAACC,MAAM,EAAEJ,CAAC,EAAE,EAAE;IACnC,MAAMD,IAAI,GAAGI,GAAG,CAACE,UAAU,CAACL,CAAC,CAAC;IAC9B,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAAER,IAAI,CAACG,IAAI,CAAEF,IAAI,IAAIO,CAAC,GAAI,CAAC,CAAC;IAAE;EAC7D;EAAE,OAAOR,IAAI;AACf;AAAE,SAASS,kBAAkBA,CAACC,GAAG,EAAE;EACjC,MAAMV,IAAI,GAAG,EAAE;EACf,KAAK,IAAIE,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC5BF,IAAI,CAACG,IAAI,CAAEO,GAAG,IAAIR,CAAC,GAAI,CAAC,CAAC;EAC3B;EACA,OAAOF,IAAI;AACb;AACA;AACA,SAASW,kBAAkBA,CAACC,UAAU,EAAE;EACtC,OAAOC,IAAI,CAACC,MAAM,CAACC,YAAY,CAAC,GAAGH,UAAU,CAAC,CAAC;AACjD;AAEA,eAAe,eAAeI,QAAQA,CAACC,IAAI,EAAE;EAC3C,IAAI,CAACA,IAAI,EAAE,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC;EAC9C,MAAMC,WAAW,GAAG,MAAMF,IAAI,CAACE,WAAW,CAAC,CAAC;EAAE,MAAMpB,KAAK,GAAG,IAAIqB,UAAU,CAACD,WAAW,CAAC;;EAEvF;EACA,IAAIE,WAAW,GAAGvB,oBAAoB,CAACC,KAAK,CAAC;;EAE7C;EACA,MAAMuB,iBAAiB,GAAGb,kBAAkB,CAACY,WAAW,CAACf,MAAM,CAAC;EAChE,MAAMiB,WAAW,GAAG,CAAC,GAAGD,iBAAiB,EAAE,GAAGD,WAAW,CAAC;;EAE1D;EACA,MAAMG,QAAQ,GAAG;IACfC,cAAc,EAAE1B,KAAK,CAACO,MAAM;IAC5BoB,QAAQ,EAAET,IAAI,CAACU,IAAI;IACnBC,QAAQ,EAAEX,IAAI,CAACY;EAAM,CAAC;;EAExB;EACA,MAAMC,WAAW,GAAGC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAAC;EAAE,MAAMS,YAAY,GAAG7B,gBAAgB,CAAC0B,WAAW,CAAC;;EAEhG;EACA,MAAMI,cAAc,GAAGzB,kBAAkB,CAACwB,YAAY,CAAC3B,MAAM,CAAC;EAC9D,MAAM6B,gBAAgB,GAAG,CAAC,GAAGD,cAAc,EAAE,GAAGD,YAAY,CAAC;EAE7D,OAAO;IAAEjC,IAAI,EAAEuB,WAAW;IAAEa,QAAQ,EAAED;EAAkB,CAAC;AAC3D;AAACE,EAAA,GAzB6BrB,QAAQ;AAAA,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}