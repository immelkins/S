{"ast":null,"code":"// Extract binary data\nconst handleExtractBinary = () => {\n  if (!frames.length) return;\n  const allBits = [];\n  for (let frameIndex = 0; frameIndex < frames.length; frameIndex++) {\n    const patch = frames[frameIndex].patch;\n    for (let i = 0; i < patch.length; i += 4) {\n      allBits.push(patch[i + 2] & 1);\n    }\n  }\n\n  // Check header\n  let headerMatches = true;\n  for (let i = 0; i < HEADER_BITS.length; i++) {\n    if (allBits[i] !== HEADER_BITS[i]) {\n      headerMatches = false;\n      break;\n    }\n  }\n  if (!headerMatches) {\n    console.warn(\"Header read from GIF:\", allBits.slice(0, HEADER_BITS.length));\n    console.warn(\"Expected HEADER_BITS:\", HEADER_BITS);\n    setError(\"Header not found in GIF.\");\n    return;\n  }\n\n  // Extract metadata length\n  const metadataLengthBits = allBits.slice(HEADER_BITS.length, HEADER_BITS.length + 32);\n  const metadataLength = parseInt(metadataLengthBits.join(''), 2);\n\n  // Separate metadata and payload\n  const metadataBits = allBits.slice(HEADER_BITS.length + 32, HEADER_BITS.length + 32 + metadataLength);\n  const payloadBits = allBits.slice(HEADER_BITS.length + 32 + metadataLength);\n\n  // Convert bits to text\n  let metadataText = '';\n  for (let i = 0; i < metadataBits.length; i++) {\n    metadataText += metadataBits[i];\n  }\n  let payloadText = '';\n  for (let i = 0; i < payloadBits.length; i++) {\n    payloadText += payloadBits[i];\n  }\n\n  // Download binary text\n  const metadataBlob = new Blob([metadataText], {\n    type: 'text/plain'\n  });\n  const metadataA = document.createElement('a');\n  metadataA.href = URL.createObjectURL(metadataBlob);\n  metadataA.download = 'metadata.txt';\n  metadataA.click();\n  const payloadBlob = new Blob([payloadText], {\n    type: 'text/plain'\n  });\n  const payloadA = document.createElement('a');\n  payloadA.href = URL.createObjectURL(payloadBlob);\n  payloadA.download = 'payload.txt';\n  payloadA.click();\n};","map":{"version":3,"names":["handleExtractBinary","frames","length","allBits","frameIndex","patch","i","push","headerMatches","HEADER_BITS","console","warn","slice","setError","metadataLengthBits","metadataLength","parseInt","join","metadataBits","payloadBits","metadataText","payloadText","metadataBlob","Blob","type","metadataA","document","createElement","href","URL","createObjectURL","download","click","payloadBlob","payloadA"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/src/components/Decryption.js"],"sourcesContent":["// Extract binary data\r\nconst handleExtractBinary = () => {\r\n  if (!frames.length) return;\r\n\r\n  const allBits = [];\r\n  for (let frameIndex = 0; frameIndex < frames.length; frameIndex++) {\r\n    const patch = frames[frameIndex].patch;\r\n    for (let i = 0; i < patch.length; i += 4) {\r\n      allBits.push(patch[i + 2] & 1);\r\n    }\r\n  }\r\n\r\n  // Check header\r\n  let headerMatches = true;\r\n  for (let i = 0; i < HEADER_BITS.length; i++) {\r\n    if (allBits[i] !== HEADER_BITS[i]) {\r\n      headerMatches = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (!headerMatches) {\r\n    console.warn(\"Header read from GIF:\", allBits.slice(0, HEADER_BITS.length));\r\n    console.warn(\"Expected HEADER_BITS:\", HEADER_BITS);\r\n    setError(\"Header not found in GIF.\");\r\n    return;\r\n  }\r\n\r\n  // Extract metadata length\r\n  const metadataLengthBits = allBits.slice(HEADER_BITS.length, HEADER_BITS.length + 32);\r\n  const metadataLength = parseInt(metadataLengthBits.join(''), 2);\r\n\r\n  // Separate metadata and payload\r\n  const metadataBits = allBits.slice(HEADER_BITS.length + 32, HEADER_BITS.length + 32 + metadataLength);\r\n  const payloadBits = allBits.slice(HEADER_BITS.length + 32 + metadataLength);\r\n\r\n  // Convert bits to text\r\n  let metadataText = '';\r\n  for (let i = 0; i < metadataBits.length; i++) {\r\n    metadataText += metadataBits[i];\r\n  }\r\n\r\n  let payloadText = '';\r\n  for (let i = 0; i < payloadBits.length; i++) {\r\n    payloadText += payloadBits[i];\r\n  }\r\n\r\n  // Download binary text\r\n  const metadataBlob = new Blob([metadataText], { type: 'text/plain' });\r\n  const metadataA = document.createElement('a');\r\n  metadataA.href = URL.createObjectURL(metadataBlob);\r\n  metadataA.download = 'metadata.txt';\r\n  metadataA.click();\r\n\r\n  const payloadBlob = new Blob([payloadText], { type: 'text/plain' });\r\n  const payloadA = document.createElement('a');\r\n  payloadA.href = URL.createObjectURL(payloadBlob);\r\n  payloadA.download = 'payload.txt';\r\n  payloadA.click();\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}