{"ast":null,"code":"/**\r\n * hammingEncode - encode binary string input with hamming algorithm\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - encoded binary string\r\n */\nfunction hammingEncode(input) {\n  if (typeof input !== 'string' || input.match(/[^10]/)) {\n    return console.error('hamming-code error: input should be binary string, for example \"101010\"');\n  }\n  var output = input;\n  var controlBitsIndexes = [];\n  var controlBits = [];\n  var l = input.length;\n  var i = 1;\n  var key, j, arr, temp, check;\n  while (l / i >= 1) {\n    controlBitsIndexes.push(i);\n    i *= 2;\n  }\n  for (j = 0; j < controlBitsIndexes.length; j++) {\n    key = controlBitsIndexes[j];\n    arr = output.slice(key - 1).split('');\n    temp = chunk(arr, key);\n    check = temp.reduce(function (prev, next, index) {\n      if (!(index % 2)) {\n        prev = prev.concat(next);\n      }\n      return prev;\n    }, []).reduce(function (prev, next) {\n      return +prev + +next;\n    }, 0) % 2 ? 1 : 0;\n    output = output.slice(0, key - 1) + check + output.slice(key - 1);\n    if (j + 1 === controlBitsIndexes.length && output.length / (key * 2) >= 1) {\n      controlBitsIndexes.push(key * 2);\n    }\n  }\n  return output;\n}\n\n/**\r\n * hammingPureDecode - just removes from input parity check bits\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - decoded binary string\r\n */\nfunction hammingPureDecode(input) {\n  if (typeof input !== 'string' || input.match(/[^10]/)) {\n    return console.error('hamming-code error: input should be binary string, for example \"101010\"');\n  }\n  var controlBitsIndexes = [];\n  var l = input.length;\n  var originCode = input;\n  var hasError = false;\n  var inputFixed, i;\n  i = 1;\n  while (l / i >= 1) {\n    controlBitsIndexes.push(i);\n    i *= 2;\n  }\n  controlBitsIndexes.forEach(function (key, index) {\n    originCode = originCode.substring(0, key - 1 - index) + originCode.substring(key - index);\n  });\n  return originCode;\n}\n\n/**\r\n * hammingDecode - decodes encoded binary string, also try to correct errors\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - decoded binary string\r\n */\nfunction hammingDecode(input) {\n  if (typeof input !== 'string' || input.match(/[^10]/)) {\n    return console.error('hamming-code error: input should be binary string, for example \"101010\"');\n  }\n  var controlBitsIndexes = [];\n  var sum = 0;\n  var l = input.length;\n  var i = 1;\n  var output = hammingPureDecode(input);\n  var inputFixed = hammingEncode(output);\n  while (l / i >= 1) {\n    controlBitsIndexes.push(i);\n    i *= 2;\n  }\n  controlBitsIndexes.forEach(function (i) {\n    if (input[i] !== inputFixed[i]) {\n      sum += i;\n    }\n  });\n  if (sum) {\n    output[sum - 1] === '1' ? output = replaceCharacterAt(output, sum - 1, '0') : output = replaceCharacterAt(output, sum - 1, '1');\n  }\n  return output;\n}\n\n/**\r\n * hammingCheck - check if encoded binary string has errors, returns true if contains error\r\n * @param {String} input - binary string, '10101'\r\n * @returns {Boolean} - hasError\r\n */\nfunction hammingCheck(input) {\n  if (typeof input !== 'string' || input.match(/[^10]/)) {\n    return console.error('hamming-code error: input should be binary string, for example \"101010\"');\n  }\n  var inputFixed = hammingEncode(hammingPureDecode(input));\n  return hasError = !(inputFixed === input);\n}\n\n/**\r\n * replaceCharacterAt - replace character at index\r\n * @param {String} str - string\r\n * @param {Number} index - index\r\n * @param {String} character - character \r\n * @returns {String} - string\r\n */\nfunction replaceCharacterAt(str, index, character) {\n  return str.substr(0, index) + character + str.substr(index + character.length);\n}\n\n/**\r\n * chunk - split array into chunks\r\n * @param {Array} arr - array\r\n * @param {Number} size - chunk size\r\n * @returns {Array} - chunked array\r\n */\nfunction chunk(arr, size) {\n  var chunks = [],\n    i = 0,\n    n = arr.length;\n  while (i < n) {\n    chunks.push(arr.slice(i, i += size));\n  }\n  return chunks;\n}\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD.\n    define(factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.hammingCode = factory();\n  }\n})(this, function () {\n  return {\n    encode: hammingEncode,\n    pureDecode: hammingPureDecode,\n    decode: hammingDecode,\n    check: hammingCheck\n  };\n});","map":{"version":3,"names":["hammingEncode","input","match","console","error","output","controlBitsIndexes","controlBits","l","length","i","key","j","arr","temp","check","push","slice","split","chunk","reduce","prev","next","index","concat","hammingPureDecode","originCode","hasError","inputFixed","forEach","substring","hammingDecode","sum","replaceCharacterAt","hammingCheck","str","character","substr","size","chunks","n","root","factory","define","amd","module","exports","hammingCode","encode","pureDecode","decode"],"sources":["C:/Users/mesco/OneDrive/Documents/GitHub/S/node_modules/hamming-code/index.js"],"sourcesContent":["/**\r\n * hammingEncode - encode binary string input with hamming algorithm\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - encoded binary string\r\n */\r\nfunction hammingEncode(input) {\r\n\tif (typeof input !== 'string' || input.match(/[^10]/)) {\r\n\t\treturn console.error('hamming-code error: input should be binary string, for example \"101010\"');\r\n\t}\r\n\r\n\tvar output = input;\r\n\tvar controlBitsIndexes = [];\r\n\tvar controlBits = [];\r\n\tvar l = input.length;\r\n\tvar i = 1;\r\n\tvar key, j, arr, temp, check;\r\n\r\n\twhile (l / i >= 1) {\r\n\t\tcontrolBitsIndexes.push(i);\r\n\t\ti *= 2;\r\n\t}\r\n\r\n\tfor (j = 0; j < controlBitsIndexes.length; j++) {\r\n\t\tkey = controlBitsIndexes[j];\r\n\t\tarr = output.slice(key - 1).split('');\r\n\t\ttemp = chunk(arr, key);\r\n\t\tcheck = (temp.reduce(function (prev, next, index) {\r\n\t\t\tif (!(index % 2)) {\r\n\t\t\t\tprev = prev.concat(next);\r\n\t\t\t}\r\n\t\t\treturn prev;\r\n\t\t}, []).reduce(function (prev, next) { return +prev + +next }, 0) % 2) ? 1 : 0;\r\n\t\toutput = output.slice(0, key - 1) + check + output.slice(key - 1);\r\n\t\tif (j + 1 === controlBitsIndexes.length && output.length / (key * 2) >= 1) {\r\n\t\t\tcontrolBitsIndexes.push(key * 2);\r\n\t\t}\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\n\r\n/**\r\n * hammingPureDecode - just removes from input parity check bits\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - decoded binary string\r\n */\r\nfunction hammingPureDecode(input) {\r\n\tif (typeof input !== 'string' || input.match(/[^10]/)) {\r\n\t\treturn console.error('hamming-code error: input should be binary string, for example \"101010\"');\r\n\t}\r\n\r\n\tvar controlBitsIndexes = [];\r\n\tvar l = input.length;\r\n\tvar originCode = input;\r\n\tvar hasError = false;\r\n\tvar inputFixed, i;\r\n\t\r\n\ti = 1;\r\n\twhile (l / i >= 1) {\r\n\t\tcontrolBitsIndexes.push(i);\r\n\t\ti *= 2;\r\n\t}\r\n\r\n\tcontrolBitsIndexes.forEach(function (key, index) {\r\n\t\toriginCode = originCode.substring(0, key - 1 - index) + originCode.substring(key - index);\r\n\t});\r\n\r\n\treturn originCode;\r\n}\r\n\r\n/**\r\n * hammingDecode - decodes encoded binary string, also try to correct errors\r\n * @param {String} input - binary string, '10101'\r\n * @returns {String} - decoded binary string\r\n */\r\nfunction hammingDecode(input) {\r\n\tif (typeof input !== 'string' || input.match(/[^10]/)) {\r\n\t\treturn console.error('hamming-code error: input should be binary string, for example \"101010\"');\r\n\t}\r\n\r\n\tvar controlBitsIndexes = [];\r\n\tvar sum = 0;\r\n\tvar l = input.length;\r\n\tvar i = 1;\r\n\tvar output = hammingPureDecode(input);\r\n\tvar inputFixed = hammingEncode(output);\r\n\r\n\r\n\twhile (l / i >= 1) {\r\n\t\tcontrolBitsIndexes.push(i);\r\n\t\ti *= 2;\r\n\t}\r\n\r\n\tcontrolBitsIndexes.forEach(function (i) {\r\n\t\tif (input[i] !== inputFixed[i]) {\r\n\t\t\tsum += i;\r\n\t\t}\r\n\t});\r\n\r\n\tif (sum) {\r\n\t\toutput[sum - 1] === '1' \r\n\t\t\t? output = replaceCharacterAt(output, sum - 1, '0')\r\n\t\t\t: output = replaceCharacterAt(output, sum - 1, '1');\r\n\t}\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * hammingCheck - check if encoded binary string has errors, returns true if contains error\r\n * @param {String} input - binary string, '10101'\r\n * @returns {Boolean} - hasError\r\n */\r\nfunction hammingCheck(input) {\r\n\tif (typeof input !== 'string' || input.match(/[^10]/)) {\r\n\t\treturn console.error('hamming-code error: input should be binary string, for example \"101010\"');\r\n\t}\r\n\r\n\tvar inputFixed = hammingEncode(hammingPureDecode(input));\r\n\r\n\treturn hasError = !(inputFixed === input);\r\n}\r\n\r\n/**\r\n * replaceCharacterAt - replace character at index\r\n * @param {String} str - string\r\n * @param {Number} index - index\r\n * @param {String} character - character \r\n * @returns {String} - string\r\n */\r\nfunction replaceCharacterAt(str, index, character) {\r\n  return str.substr(0, index) + character + str.substr(index+character.length);\r\n}\r\n\r\n/**\r\n * chunk - split array into chunks\r\n * @param {Array} arr - array\r\n * @param {Number} size - chunk size\r\n * @returns {Array} - chunked array\r\n */\r\nfunction chunk(arr, size) {\r\n\tvar chunks = [],\r\n\ti = 0,\r\n\tn = arr.length;\r\n\twhile (i < n) {\r\n\t\tchunks.push(arr.slice(i, i += size));\r\n\t}\r\n\treturn chunks;\r\n}\r\n\r\n\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD.\r\n        define(factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like environments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    } else {\r\n        // Browser globals (root is window)\r\n        root.hammingCode = factory();\r\n    }\r\n}(this, function () {\r\n    return {\r\n    \tencode: hammingEncode,\r\n    \tpureDecode: hammingPureDecode,\r\n    \tdecode: hammingDecode,\r\n    \tcheck: hammingCheck\r\n    };\r\n}));"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}